import{u as p,j as e,t as d,C as j}from"./index-D-TuwZY7.js";import{S as b,A as f,a as g,b as N,c as v,B as S,d as P,e as w,f as y,L as B,r as A}from"./LogoutDrop-3yhW_5Y5.js";import{I as n}from"./input-z24iJ4by.js";import{B as L}from"./authService-gIo5CBQw.js";import{u as E,a as F,L as o}from"./index.esm-C5ls1Czy.js";function D(){const{register:t,handleSubmit:m,reset:l,formState:{errors:s,isSubmitting:u}}=E(),x=p(),a=F({mutationFn:async r=>{var c;const i=(c=j.currentUser)==null?void 0:c.uid;if(!i)throw new Error("User not authenticated");return await A(r,i)},onSuccess:()=>{d.success("Product created successfully"),l(),x("/product-list")},onError:r=>{d.error("Failed to create product: "+r.message)}}),h=r=>{a.mutate(r)};return e.jsxs(b,{children:[e.jsx(f,{}),e.jsxs(g,{children:[e.jsxs("header",{className:"flex h-16 justify-between shrink-0 items-center gap-2 bg-accent border rounded-2xl relative",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4",children:[e.jsx(N,{className:"-ml-1"}),e.jsx(v,{orientation:"vertical",className:"mr-2 data-[orientation=vertical]:h-4"}),e.jsx(S,{children:e.jsx(P,{children:e.jsx(w,{className:"hidden md:block text-xl",children:e.jsx(y,{href:"#",children:"Add Product"})})})})]}),e.jsx(B,{})]}),e.jsx("section",{className:"flex flex-1 flex-col justify-center gap-4 p-4 max-h-[90vh] overflow-auto font-dmsans",children:e.jsxs("form",{onSubmit:m(h),className:"md:w-[500px] space-y-4 bg-white p-6 rounded-xl shadow-md mx-auto w-full",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"name",className:"mb-2",children:"Product Name"}),e.jsx(n,{id:"name",placeholder:"Enter product name",...t("name",{required:"Name is required"})}),s.name&&e.jsx("p",{className:"text-red-500 text-sm",children:s.name.message})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"price",className:"mb-2",children:"Price"}),e.jsx(n,{id:"price",type:"number",placeholder:"Enter price",...t("price",{required:"Price is required",valueAsNumber:!0})}),s.price&&e.jsx("p",{className:"text-red-500 text-sm",children:s.price.message})]}),e.jsx(L,{type:"submit",disabled:u||a.isPending,children:a.isPending?"Saving...":"Add Product"})]})})]})]})}export{D as default};
